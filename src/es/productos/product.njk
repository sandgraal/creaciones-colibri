---
layout: layouts/base.njk
pagination:
  data: products
  size: 1
  alias: baseProduct
permalink: "es/productos/{{ baseProduct.id }}/"
locale: es
eleventyComputed:
  title: >-
    {% set translations = collections.i18n and collections.i18n[0].data.i18n %}
    {% set productTranslations = translations and translations.products and translations.products['es'] %}
    {% set translation = productTranslations and productTranslations[baseProduct.id] %}
    {{ (translation and translation.name) or baseProduct.name }}
  description: >-
    {% set translations = collections.i18n and collections.i18n[0].data.i18n %}
    {% set productTranslations = translations and translations.products and translations.products['es'] %}
    {% set translation = productTranslations and productTranslations[baseProduct.id] %}
    {{ (translation and translation.shortDescription) or baseProduct.shortDescription or baseProduct.description }}
  localeLinks:
    en: "/products/{{ baseProduct.id }}/"
---

{% set translations = collections.i18n[0].data.i18n %}
{% set localeStrings = translations.es %}
{% set productTranslations = translations.products.es %}
{% set translation = productTranslations and productTranslations[baseProduct.id] %}
{% set product_name = (translation and translation.name) or baseProduct.name %}
{% set product_short = (translation and translation.shortDescription) or baseProduct.shortDescription %}
{% set product_description = (translation and translation.description) or baseProduct.description %}
{% set product_unit = (translation and translation.unit) or baseProduct.unit %}
{% set product_ingredients = (translation and translation.ingredients) or baseProduct.ingredients %}
{% set product_dietary = (translation and translation.dietary) or baseProduct.dietary %}
{% set product_benefits = (translation and translation.benefits) or baseProduct.benefits %}
{% set product_labels = (translation and translation.labels) or baseProduct.labels %}
{% set product_included_heading = (translation and translation.includedHeading) or baseProduct.includedHeading %}
{% set product_included = (translation and translation.includedProducts) or baseProduct.includedProducts %}
{% set product_bundle_extras_heading = (translation and translation.bundleExtrasHeading) or baseProduct.bundleExtrasHeading %}
{% set product_bundle_extras = (translation and translation.bundleExtras) or baseProduct.bundleExtras %}
{% set product_subscription = (translation and translation.subscription) or baseProduct.subscription %}
{% set product_shipping_note = (translation and translation.shippingNote) or baseProduct.shippingNote %}
{% set product_category = baseProduct.category %}
{% if product_category == 'Hot Sauces' %}
  {% set product_category = 'Salsas picantes' %}
{% elif product_category == 'Granola & Crunch' %}
  {% set product_category = 'Granolas y crujientes' %}
{% elif product_category == 'Wellness Pantry' %}
  {% set product_category = 'Despensa de bienestar' %}
{% endif %}
{% set product_heat = baseProduct.heatLevel %}

<article class="product-detail">
  <header class="product-detail__header">
    <a class="product-detail__back" href="{{ '/es/productos/' | url }}">← Volver al catálogo</a>
    <h1>{{ product_name }}</h1>
    <p class="product-detail__summary">{{ product_short }}</p>
    {% if product_labels and product_labels | length %}
      <ul class="product-detail__labels">
        {% for label in product_labels %}
          <li class="product-detail__label">{{ label }}</li>
        {% endfor %}
      </ul>
    {% endif %}
    <div class="product-detail__meta">
      <span class="product-detail__price">${{ baseProduct.price }} <small>{{ product_unit }}</small></span>
      <span class="product-detail__category">{{ product_category }}</span>
      {% if product_heat != null %}
        <span class="product-detail__heat">Picor: {{ product_heat }}/5</span>
      {% endif %}
    </div>
    {% if site.snipcart.publicKey %}
      <div class="product-detail__purchase">
        <label class="product-detail__quantity-label" for="quantity-{{ baseProduct.id }}">Cantidad</label>
        <input
          id="quantity-{{ baseProduct.id }}"
          class="product-detail__quantity"
          type="number"
          min="1"
          value="1"
          inputmode="numeric"
          autocomplete="off">
        <button
          class="button button-primary product-detail__cart snipcart-add-item"
          type="button"
          data-item-id="{{ baseProduct.id }}"
          data-item-name="{{ product_name }}"
          data-item-price="{{ baseProduct.price }}"
          data-item-url="{{ page.url | url }}"
          data-item-description="{{ product_short }}"
          data-item-image="{{ baseProduct.image.src | url }}"
          data-item-quantity="1"
          data-quantity-input="quantity-{{ baseProduct.id }}">
          Agregar al carrito
        </button>
      </div>
    {% else %}
      <div class="product-detail__purchase product-detail__purchase--disabled" role="note">
        <p class="product-detail__availability">
          Muy pronto habilitaremos la compra en línea. Escríbenos para reservar un lote o consultar disponibilidad.
        </p>
        <a class="button button-secondary" href="{{ '/es/contacto/' | url }}">Contáctanos</a>
      </div>
    {% endif %}
  </header>

  <div class="product-detail__body">
    <figure class="product-detail__figure">
      {% if baseProduct.image.src | isSvg %}
        <img src="{{ baseProduct.image.src | url }}" alt="{{ baseProduct.image.alt }}" loading="lazy" decoding="async">
      {% else %}
        {% responsiveImage baseProduct.image.src, baseProduct.image.alt, 'product-detail__image' %}
      {% endif %}
    </figure>
    <section class="product-detail__content">
      <h2>Acerca del producto</h2>
      <p>{{ product_description }}</p>

      {% if product_included and product_included | length %}
        <h3>{{ product_included_heading | default("Qué incluye") }}</h3>
        <ul class="product-detail__list">
          {% for item in product_included %}
            <li>
              {% if item.quantity %}<strong>{{ item.quantity }}×</strong> {% endif %}
              {{ item.name }}
              {% if item.note %}
                <span class="product-detail__note">{{ item.note }}</span>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% endif %}

      {% if product_bundle_extras and product_bundle_extras | length %}
        <h3>{{ product_bundle_extras_heading | default("Extras del paquete") }}</h3>
        <ul class="product-detail__list">
          {% for extra in product_bundle_extras %}
            <li>{{ extra }}</li>
          {% endfor %}
        </ul>
      {% endif %}

      {% if product_ingredients and product_ingredients | length %}
        <h3>Ingredientes</h3>
        <ul class="product-detail__list">
          {% for ingredient in product_ingredients %}
            <li>{{ ingredient }}</li>
          {% endfor %}
        </ul>
      {% endif %}

      {% if product_dietary and product_dietary | length %}
        <h3>Notas dietéticas</h3>
        <ul class="product-detail__tags">
          {% for tag in product_dietary %}
            <li>{{ tag }}</li>
          {% endfor %}
        </ul>
      {% endif %}

      {% if product_benefits and product_benefits | length %}
        <h3>Beneficios funcionales</h3>
        <ul class="product-detail__tags">
          {% for benefit in product_benefits %}
            <li>{{ benefit }}</li>
          {% endfor %}
        </ul>
      {% endif %}

      {% if product_subscription %}
        <div class="product-detail__subscription">
          <h3>{{ product_subscription.heading | default("Beneficios de la suscripción") }}</h3>
          {% if product_subscription.frequency %}
            <p class="product-detail__note">{{ product_subscription.frequency }}</p>
          {% endif %}
          {% if product_subscription.summary %}
            <p>{{ product_subscription.summary }}</p>
          {% endif %}
          {% if product_subscription.perks and product_subscription.perks | length %}
            <ul class="product-detail__list">
              {% for perk in product_subscription.perks %}
                <li>{{ perk }}</li>
              {% endfor %}
            </ul>
          {% endif %}
          {% if product_subscription.renewalNote %}
            <p class="product-detail__note">{{ product_subscription.renewalNote }}</p>
          {% endif %}
        </div>
      {% endif %}

      {% if product_shipping_note %}
        <p class="product-detail__note">{{ product_shipping_note }}</p>
      {% endif %}
    </section>
  </div>
</article>
