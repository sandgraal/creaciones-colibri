<article class="product-card">
  <a class="product-card__link" href="{{ product.url | url }}">
    <div class="product-card__media">
      {% if product.image.src | isSvg %}
        <img src="{{ product.image.src | url }}" alt="{{ product.image.alt }}" loading="lazy" decoding="async">
      {% else %}
        {% responsiveImage product.image.src, product.image.alt, 'product-card__image' %}
      {% endif %}
    </div>
    <div class="product-card__content">
      <h3 class="product-card__title">{{ product.name }}</h3>
      <p class="product-card__summary">{{ product.shortDescription }}</p>
      <dl class="product-card__meta">
        <div class="product-card__meta-row">
          <dt>Category</dt>
          <dd>{{ product.category }}</dd>
        </div>
        {% if product.dietary and product.dietary | length %}
          <div class="product-card__meta-row">
            <dt>Dietary</dt>
            <dd>{{ product.dietary | join(", ") }}</dd>
          </div>
        {% endif %}
      </dl>
    </div>
  </a>
  <div class="product-card__footer">
    <div class="product-card__price">
      <span class="product-card__amount">${{ product.price }}</span>
      <span class="product-card__unit">{{ product.unit }}</span>
    </div>
    {% if site.snipcart.publicKey %}
      <button
        class="button button-primary product-card__cart snipcart-add-item"
        type="button"
        data-item-id="{{ product.id }}"
        data-item-name="{{ product.name }}"
        data-item-price="{{ product.price }}"
        data-item-url="{{ product.url | url }}"
        data-item-description="{{ product.shortDescription }}"
        data-item-image="{{ product.image.src | url }}"
        data-item-quantity="1">
        Add to cart
      </button>
    {% else %}
      <a class="button button-secondary product-card__cart" href="{{ product.url | url }}">View details</a>
    {% endif %}
  </div>
</article>
